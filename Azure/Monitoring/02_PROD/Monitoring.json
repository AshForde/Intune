{
    "properties": {
      "lenses": {
        "0": {
          "order": 0,
          "parts": {
            "0": {
              "position": {
                "x": 0,
                "y": 0,
                "colSpan": 4,
                "rowSpan": 2
              },
              "metadata": {
                "inputs": [],
                "type": "Extension/Microsoft_AAD_IAM/PartType/OrganizationIdentityPart"
              }
            },
            "1": {
              "position": {
                "x": 4,
                "y": 0,
                "colSpan": 2,
                "rowSpan": 2
              },
              "metadata": {
                "inputs": [],
                "type": "Extension/HubsExtension/PartType/ClockPart",
                "settings": {}
              }
            },
            "2": {
              "position": {
                "x": 6,
                "y": 0,
                "colSpan": 15,
                "rowSpan": 7
              },
              "metadata": {
                "inputs": [
                  {
                    "name": "ComponentId",
                    "value": "Azure Monitor",
                    "isOptional": true
                  },
                  {
                    "name": "TimeContext",
                    "value": null,
                    "isOptional": true
                  },
                  {
                    "name": "ResourceIds",
                    "value": [
                      "Azure Monitor"
                    ],
                    "isOptional": true
                  },
                  {
                    "name": "ConfigurationId",
                    "value": "community-Workbooks/Virtual Machines/At-scale Metrics",
                    "isOptional": true
                  },
                  {
                    "name": "Type",
                    "value": "workbook",
                    "isOptional": true
                  },
                  {
                    "name": "GalleryResourceType",
                    "value": "Azure Monitor",
                    "isOptional": true
                  },
                  {
                    "name": "PinName",
                    "value": "Key Metrics",
                    "isOptional": true
                  },
                  {
                    "name": "StepSettings",
                    "value": "{\"chartId\":\"workbookdb19a8d8-91af-44ea-951d-5ffa133b2ebe\",\"version\":\"MetricsItem/2.0\",\"size\":2,\"chartType\":0,\"resourceType\":\"microsoft.compute/virtualmachines\",\"metricScope\":0,\"resourceParameter\":\"VirtualMachines\",\"resourceIds\":[\"{VirtualMachines}\"],\"timeContextFromParameter\":\"TimeRange\",\"timeContext\":{\"durationMs\":3600000},\"metrics\":[{\"namespace\":\"microsoft.compute/virtualmachines\",\"metric\":\"microsoft.compute/virtualmachines--Percentage CPU\",\"aggregation\":4},{\"namespace\":\"microsoft.compute/virtualmachines\",\"metric\":\"microsoft.compute/virtualmachines--Disk Read Bytes\",\"aggregation\":1},{\"namespace\":\"microsoft.compute/virtualmachines\",\"metric\":\"microsoft.compute/virtualmachines--Disk Write Bytes\",\"aggregation\":1},{\"namespace\":\"microsoft.compute/virtualmachines\",\"metric\":\"microsoft.compute/virtualmachines--Network In Total\",\"aggregation\":1},{\"namespace\":\"microsoft.compute/virtualmachines\",\"metric\":\"microsoft.compute/virtualmachines--Network Out Total\",\"aggregation\":1}],\"gridSettings\":{\"formatters\":[{\"columnMatch\":\"$gen_group\",\"formatter\":13,\"formatOptions\":{\"linkTarget\":\"Resource\",\"showIcon\":true}},{\"columnMatch\":\"Subscription\",\"formatter\":5,\"formatOptions\":{\"showIcon\":true}},{\"columnMatch\":\"Name\",\"formatter\":5,\"formatOptions\":{\"showIcon\":true}},{\"columnMatch\":\"microsoft.compute/virtualmachines--Percentage CPU\",\"formatter\":8,\"formatOptions\":{\"min\":0,\"palette\":\"blue\",\"linkTarget\":\"WorkbookTemplate\",\"linkIsContextBlade\":true,\"showIcon\":true,\"workbookContext\":{\"componentIdSource\":\"column\",\"componentId\":\"Name\",\"resourceIdsSource\":\"column\",\"resourceIds\":\"Name\",\"templateIdSource\":\"static\",\"templateId\":\"Community-Workbooks/Virtual Machines/Virtual machine details\",\"typeSource\":\"static\",\"type\":\"workbook\",\"gallerySource\":\"static\",\"gallery\":\"microsoft.compute/virtualmachines\"}},\"numberFormat\":{\"unit\":1,\"options\":{\"style\":\"decimal\",\"maximumFractionDigits\":1}}},{\"columnMatch\":\"microsoft.compute/virtualmachines--Percentage CPU Timeline\",\"formatter\":21,\"formatOptions\":{\"min\":0,\"palette\":\"blue\",\"showIcon\":true}},{\"columnMatch\":\"microsoft.compute/virtualmachines--Disk Read Bytes|microsoft.compute/virtualmachines--Disk Write Bytes\",\"formatter\":8,\"formatOptions\":{\"min\":0,\"palette\":\"yellow\",\"showIcon\":true},\"numberFormat\":{\"unit\":2,\"options\":{\"style\":\"decimal\",\"maximumFractionDigits\":1}}},{\"columnMatch\":\"microsoft.compute/virtualmachines--Disk Read Bytes Timeline\",\"formatter\":5,\"formatOptions\":{\"showIcon\":true}},{\"columnMatch\":\"microsoft.compute/virtualmachines--Disk Write Bytes Timeline\",\"formatter\":5,\"formatOptions\":{\"showIcon\":true}},{\"columnMatch\":\"microsoft.compute/virtualmachines--Network In Total|microsoft.compute/virtualmachines--Network Out Total\",\"formatter\":8,\"formatOptions\":{\"min\":0,\"palette\":\"orange\",\"showIcon\":true},\"numberFormat\":{\"unit\":2,\"options\":{\"style\":\"decimal\",\"maximumFractionDigits\":1}}},{\"columnMatch\":\"microsoft.compute/virtualmachines--Network In Total Timeline\",\"formatter\":5,\"formatOptions\":{\"showIcon\":true}},{\"columnMatch\":\"microsoft.compute/virtualmachines--Network Out Total Timeline\",\"formatter\":5,\"formatOptions\":{\"showIcon\":true}}],\"rowLimit\":10000,\"filter\":true,\"hierarchySettings\":{\"treeType\":1,\"groupBy\":[\"Subscription\"],\"expandTopLevel\":true,\"finalBy\":\"Name\"},\"sortBy\":[{\"itemKey\":\"$gen_heatmap_microsoft.compute/virtualmachines--Percentage CPU_3\",\"sortOrder\":2}],\"labelSettings\":[{\"columnId\":\"microsoft.compute/virtualmachines--Percentage CPU\",\"label\":\"Percentage CPU (Average)\"},{\"columnId\":\"microsoft.compute/virtualmachines--Percentage CPU Timeline\",\"label\":\"Percentage CPU Timeline\"},{\"columnId\":\"microsoft.compute/virtualmachines--Disk Read Bytes\",\"label\":\"Disk Read Bytes (Sum)\"},{\"columnId\":\"microsoft.compute/virtualmachines--Disk Read Bytes Timeline\",\"label\":\"Disk Read Bytes Timeline\"},{\"columnId\":\"microsoft.compute/virtualmachines--Disk Write Bytes\",\"label\":\"Disk Write Bytes (Sum)\"},{\"columnId\":\"microsoft.compute/virtualmachines--Disk Write Bytes Timeline\",\"label\":\"Disk Write Bytes Timeline\"},{\"columnId\":\"microsoft.compute/virtualmachines--Network In Total\",\"label\":\"Network In Total (Sum)\"},{\"columnId\":\"microsoft.compute/virtualmachines--Network In Total Timeline\",\"label\":\"Network In Total Timeline\"},{\"columnId\":\"microsoft.compute/virtualmachines--Network Out Total\",\"label\":\"Network Out Total (Sum)\"},{\"columnId\":\"microsoft.compute/virtualmachines--Network Out Total Timeline\",\"label\":\"Network Out Total Timeline\"}]},\"sortBy\":[{\"itemKey\":\"$gen_heatmap_microsoft.compute/virtualmachines--Percentage CPU_3\",\"sortOrder\":2}],\"showExportToExcel\":true}",
                    "isOptional": true
                  },
                  {
                    "name": "ParameterValues",
                    "value": {
                      "Subscription": {
                        "type": 6,
                        "value": [
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf"
                        ],
                        "isPending": false,
                        "isWaiting": false,
                        "isFailed": false,
                        "isGlobal": false,
                        "labelValue": "Production Orange Subscription",
                        "displayName": "Subscription",
                        "formattedValue": "'/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf'"
                      },
                      "VirtualMachines": {
                        "type": 5,
                        "value": [
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T1NETRG01/providers/Microsoft.Compute/virtualMachines/Op4T1NetFw01-FGT-A",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T1NETRG01/providers/Microsoft.Compute/virtualMachines/Op4T1NetPw01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2ClnRh01/providers/Microsoft.Compute/virtualMachines/Op4T2ClnPw01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2ClnRl01/providers/Microsoft.Compute/virtualMachines/Op4T2ClnVm01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2CorRl01/providers/Microsoft.Compute/virtualMachines/Op4T2CorAc01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T2CORRH01/providers/Microsoft.Compute/virtualMachines/Op4T2CorDc01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2CorRh01/providers/Microsoft.Compute/virtualMachines/Op4T2CorDc02",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2CorRh01/providers/Microsoft.Compute/virtualMachines/Op4T2CorPw01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2DmzRg02/providers/Microsoft.Compute/virtualMachines/Op4T2DmzFw01-FGT-A",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2DmzRg03/providers/Microsoft.Compute/virtualMachines/Op4T2DmzPw01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T2DMZRG02/providers/Microsoft.Compute/virtualMachines/Op4T2DmzVm01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2InfRl01/providers/Microsoft.Compute/virtualMachines/Op4T2InfDp01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T2INFRL01/providers/Microsoft.Compute/virtualMachines/Op4T2InfLg01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2InfRh01/providers/Microsoft.Compute/virtualMachines/Op4T2InfPw01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3BroRl01/providers/Microsoft.Compute/virtualMachines/Op4T3BroAp01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T3BRORH01/providers/Microsoft.Compute/virtualMachines/Op4T3BroDb01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3BroRh01/providers/Microsoft.Compute/virtualMachines/Op4T3BroPw01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3BroRl01/providers/Microsoft.Compute/virtualMachines/Op4T3BroVm02",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T3BRORH01/providers/Microsoft.Compute/virtualMachines/Op4T3BroWb01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3MsgRl01/providers/Microsoft.Compute/virtualMachines/Op4T3MsgEx01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3MsgRh01/providers/Microsoft.Compute/virtualMachines/Op4T3MsgPw01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3SoeRl01/providers/Microsoft.Compute/virtualMachines/Op4T3SoeVm01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T3UCCRH01/providers/Microsoft.Compute/virtualMachines/Op4T3UccDb01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3UccRl01/providers/Microsoft.Compute/virtualMachines/Op4T3UccDm1",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T3UCCRH01/providers/Microsoft.Compute/virtualMachines/Op4T3UccLg01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T3UCCRL01/providers/Microsoft.Compute/virtualMachines/Op4T3UccPm1",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3UccRh01/providers/Microsoft.Compute/virtualMachines/Op4T3UccPw01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3UccRl01/providers/Microsoft.Compute/virtualMachines/Op4T3UccPw02",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3UccRl01/providers/Microsoft.Compute/virtualMachines/Op4T3UccWb01"
                        ],
                        "isPending": false,
                        "isWaiting": false,
                        "isFailed": false,
                        "isGlobal": false,
                        "labelValue": "All",
                        "displayName": "Virtual Machines",
                        "specialValue": [
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T1NETRG01/providers/Microsoft.Compute/virtualMachines/Op4T1NetFw01-FGT-A",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T1NETRG01/providers/Microsoft.Compute/virtualMachines/Op4T1NetPw01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2ClnRh01/providers/Microsoft.Compute/virtualMachines/Op4T2ClnPw01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2ClnRl01/providers/Microsoft.Compute/virtualMachines/Op4T2ClnVm01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2CorRl01/providers/Microsoft.Compute/virtualMachines/Op4T2CorAc01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T2CORRH01/providers/Microsoft.Compute/virtualMachines/Op4T2CorDc01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2CorRh01/providers/Microsoft.Compute/virtualMachines/Op4T2CorDc02",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2CorRh01/providers/Microsoft.Compute/virtualMachines/Op4T2CorPw01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2DmzRg02/providers/Microsoft.Compute/virtualMachines/Op4T2DmzFw01-FGT-A",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2DmzRg03/providers/Microsoft.Compute/virtualMachines/Op4T2DmzPw01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T2DMZRG02/providers/Microsoft.Compute/virtualMachines/Op4T2DmzVm01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2InfRl01/providers/Microsoft.Compute/virtualMachines/Op4T2InfDp01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T2INFRL01/providers/Microsoft.Compute/virtualMachines/Op4T2InfLg01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2InfRh01/providers/Microsoft.Compute/virtualMachines/Op4T2InfPw01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3BroRl01/providers/Microsoft.Compute/virtualMachines/Op4T3BroAp01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T3BRORH01/providers/Microsoft.Compute/virtualMachines/Op4T3BroDb01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3BroRh01/providers/Microsoft.Compute/virtualMachines/Op4T3BroPw01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3BroRl01/providers/Microsoft.Compute/virtualMachines/Op4T3BroVm02",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T3BRORH01/providers/Microsoft.Compute/virtualMachines/Op4T3BroWb01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3MsgRl01/providers/Microsoft.Compute/virtualMachines/Op4T3MsgEx01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3MsgRh01/providers/Microsoft.Compute/virtualMachines/Op4T3MsgPw01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3SoeRl01/providers/Microsoft.Compute/virtualMachines/Op4T3SoeVm01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T3UCCRH01/providers/Microsoft.Compute/virtualMachines/Op4T3UccDb01",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3UccRl01/providers/Microsoft.Compute/virtualMachines/Op4T3UccDm1",
                          "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T3UCCRH01/providers/Microsoft.Compute/virtualMachines/Op4T3UccLg01",
                          "value::all"
                        ],
                        "formattedValue": "'/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T1NETRG01/providers/Microsoft.Compute/virtualMachines/Op4T1NetFw01-FGT-A','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T1NETRG01/providers/Microsoft.Compute/virtualMachines/Op4T1NetPw01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2ClnRh01/providers/Microsoft.Compute/virtualMachines/Op4T2ClnPw01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2ClnRl01/providers/Microsoft.Compute/virtualMachines/Op4T2ClnVm01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2CorRl01/providers/Microsoft.Compute/virtualMachines/Op4T2CorAc01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T2CORRH01/providers/Microsoft.Compute/virtualMachines/Op4T2CorDc01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2CorRh01/providers/Microsoft.Compute/virtualMachines/Op4T2CorDc02','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2CorRh01/providers/Microsoft.Compute/virtualMachines/Op4T2CorPw01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2DmzRg02/providers/Microsoft.Compute/virtualMachines/Op4T2DmzFw01-FGT-A','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2DmzRg03/providers/Microsoft.Compute/virtualMachines/Op4T2DmzPw01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T2DMZRG02/providers/Microsoft.Compute/virtualMachines/Op4T2DmzVm01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2InfRl01/providers/Microsoft.Compute/virtualMachines/Op4T2InfDp01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T2INFRL01/providers/Microsoft.Compute/virtualMachines/Op4T2InfLg01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T2InfRh01/providers/Microsoft.Compute/virtualMachines/Op4T2InfPw01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3BroRl01/providers/Microsoft.Compute/virtualMachines/Op4T3BroAp01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T3BRORH01/providers/Microsoft.Compute/virtualMachines/Op4T3BroDb01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3BroRh01/providers/Microsoft.Compute/virtualMachines/Op4T3BroPw01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3BroRl01/providers/Microsoft.Compute/virtualMachines/Op4T3BroVm02','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T3BRORH01/providers/Microsoft.Compute/virtualMachines/Op4T3BroWb01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3MsgRl01/providers/Microsoft.Compute/virtualMachines/Op4T3MsgEx01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3MsgRh01/providers/Microsoft.Compute/virtualMachines/Op4T3MsgPw01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3SoeRl01/providers/Microsoft.Compute/virtualMachines/Op4T3SoeVm01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T3UCCRH01/providers/Microsoft.Compute/virtualMachines/Op4T3UccDb01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3UccRl01/providers/Microsoft.Compute/virtualMachines/Op4T3UccDm1','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T3UCCRH01/providers/Microsoft.Compute/virtualMachines/Op4T3UccLg01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/OP4T3UCCRL01/providers/Microsoft.Compute/virtualMachines/Op4T3UccPm1','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3UccRh01/providers/Microsoft.Compute/virtualMachines/Op4T3UccPw01','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3UccRl01/providers/Microsoft.Compute/virtualMachines/Op4T3UccPw02','/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T3UccRl01/providers/Microsoft.Compute/virtualMachines/Op4T3UccWb01'"
                      },
                      "TimeRange": {
                        "type": 4,
                        "value": {
                          "durationMs": 3600000
                        },
                        "isPending": false,
                        "isWaiting": false,
                        "isFailed": false,
                        "isGlobal": false,
                        "labelValue": "Last hour",
                        "displayName": "Time Range",
                        "formattedValue": "Last hour"
                      },
                      "Message": {
                        "type": 1,
                        "value": "# 29 / 29",
                        "isPending": false,
                        "isWaiting": false,
                        "isFailed": false,
                        "isGlobal": false,
                        "labelValue": "# 29 / 29",
                        "displayName": "Message",
                        "formattedValue": "# 29 / 29"
                      },
                      "selectedTab": {
                        "type": 1,
                        "value": "Details",
                        "formattedValue": "Details"
                      }
                    },
                    "isOptional": true
                  },
                  {
                    "name": "Location",
                    "isOptional": true
                  }
                ],
                "type": "Extension/AppInsightsExtension/PartType/PinnedNotebookMetricsPart"
              }
            },
            "3": {
              "position": {
                "x": 21,
                "y": 0,
                "colSpan": 17,
                "rowSpan": 11
              },
              "metadata": {
                "inputs": [
                  {
                    "name": "ComponentId",
                    "value": "Azure Monitor",
                    "isOptional": true
                  },
                  {
                    "name": "TimeContext",
                    "value": null,
                    "isOptional": true
                  },
                  {
                    "name": "ResourceIds",
                    "value": [
                      "Azure Monitor"
                    ],
                    "isOptional": true
                  },
                  {
                    "name": "ConfigurationId",
                    "value": "community-Workbooks/Azure Monitor - Agents/Overview",
                    "isOptional": true
                  },
                  {
                    "name": "Type",
                    "value": "workbook",
                    "isOptional": true
                  },
                  {
                    "name": "GalleryResourceType",
                    "value": "Azure Monitor",
                    "isOptional": true
                  },
                  {
                    "name": "PinName",
                    "value": "Log Analytics Agent Health",
                    "isOptional": true
                  },
                  {
                    "name": "StepSettings",
                    "value": "{\"version\":\"KqlItem/1.0\",\"query\":\"Heartbeat\\r\\n| where TimeGenerated {TimeRange:query}\\r\\n| summarize LastHeartbeat = max(TimeGenerated) by Computer\\r\\n| extend State = iff(LastHeartbeat < ago({UnhealthyCriteria}), 'Unhealthy', 'Healthy')\\r\\n| extend TimeFromNow = now() - LastHeartbeat\\r\\n| extend [\\\"TimeAgo\\\"] = strcat(case(TimeFromNow < 2m, strcat(toint(TimeFromNow / 1m), ' seconds'), TimeFromNow < 2h, strcat(toint(TimeFromNow / 1m), ' minutes'), TimeFromNow < 2d, strcat(toint(TimeFromNow / 1h), ' hours'), strcat(toint(TimeFromNow / 1d), ' days')), ' ago')\\r\\n| join (\\r\\nHeartbeat\\r\\n| where TimeGenerated {TimeRange:query}\\r\\n| extend Packed = pack_all()\\r\\n) on Computer\\r\\n| where TimeGenerated == LastHeartbeat\\r\\n| join (\\r\\nHeartbeat\\r\\n| where TimeGenerated {TimeRange:query}\\r\\n| make-series InternalTrend=iff(count() > 0, 1, 0) default = 0 on TimeGenerated from {TimeRange:start} to {TimeRange:end} step {UnhealthyCriteria} by Computer\\r\\n| extend Trend=array_slice(InternalTrend, array_length(InternalTrend) - 30, array_length(InternalTrend)-1)\\r\\n| extend (s_min, s_minId, s_max, s_maxId, s_avg, s_var, s_stdev) = series_stats(Trend)\\r\\n| project Computer, Trend, s_avg\\r\\n) on Computer\\r\\n| order by State, s_avg asc, TimeAgo\\r\\n| project [\\\"_ComputerName_\\\"] = Computer, [\\\"Computer\\\"]=strcat('🖥️ ', Computer), State, [\\\"Environment\\\"] = iff(ComputerEnvironment == \\\"Azure\\\", ComputerEnvironment, Category), [\\\"OS\\\"]=iff(isempty(OSName), OSType, OSName), [\\\"Azure Resource\\\"]=ResourceId, Version, [\\\"Time\\\"]=strcat('🕒 ', TimeAgo), [\\\"Heartbeat Trend\\\"]=Trend, [\\\"Details\\\"]=Packed\\r\\n\",\"size\":2,\"showAnalytics\":true,\"title\":\"Agent Details\",\"noDataMessage\":\"Looks like you have no agents sending heartbeat information to this workspace. Pick a different workspace.\",\"timeContext\":{\"durationMs\":259200000},\"timeContextFromParameter\":\"TimeRange\",\"exportFieldName\":\"_ComputerName_\",\"exportParameterName\":\"ComputerName\",\"exportDefaultValue\":\"\\\"\\\"\",\"showExportToExcel\":true,\"queryType\":0,\"resourceType\":\"microsoft.operationalinsights/workspaces\",\"crossComponentResources\":[\"{Workspace}\"],\"gridSettings\":{\"formatters\":[{\"columnMatch\":\"_ComputerName_\",\"formatter\":5,\"formatOptions\":{\"showIcon\":true}},{\"columnMatch\":\"State\",\"formatter\":18,\"formatOptions\":{\"showIcon\":true,\"thresholdsOptions\":\"icons\",\"thresholdsGrid\":[{\"operator\":\"==\",\"thresholdValue\":\"Unhealthy\",\"representation\":\"4\",\"text\":\"{0}\"},{\"operator\":\"Default\",\"thresholdValue\":null,\"representation\":\"success\",\"text\":\"{0}\"}]},\"tooltipFormat\":{\"tooltip\":\"Click to see details of the last event sent by this computer.\"}},{\"columnMatch\":\"Heartbeat Trend\",\"formatter\":10,\"formatOptions\":{\"palette\":\"redGreen\",\"showIcon\":true},\"tooltipFormat\":{\"tooltip\":\"Each bar represents the bucket of time based on the Unhealthy Criteria. Showing last 30 buckets max.\"}},{\"columnMatch\":\"Details\",\"formatter\":5,\"formatOptions\":{\"showIcon\":true}}],\"filter\":true},\"tileSettings\":{\"titleContent\":{\"columnMatch\":\"Computer\",\"formatter\":1,\"formatOptions\":{\"showIcon\":true}},\"subtitleContent\":{\"columnMatch\":\"LastCall\",\"formatter\":6,\"formatOptions\":{\"showIcon\":true}},\"showBorder\":false},\"graphSettings\":{\"type\":0}}",
                    "isOptional": true
                  },
                  {
                    "name": "ParameterValues",
                    "value": {
                      "DefaultSubscription_Internal": {
                        "type": 1,
                        "value": "fb148d01-d7e6-42f4-9b05-9d28bd1122cf",
                        "isPending": false,
                        "isWaiting": false,
                        "isFailed": false,
                        "isGlobal": false,
                        "labelValue": "fb148d01-d7e6-42f4-9b05-9d28bd1122cf",
                        "displayName": "DefaultSubscription_Internal",
                        "formattedValue": "fb148d01-d7e6-42f4-9b05-9d28bd1122cf"
                      },
                      "Subscription": {
                        "type": 6,
                        "value": "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf",
                        "isPending": false,
                        "isWaiting": false,
                        "isFailed": false,
                        "isGlobal": false,
                        "labelValue": "Production Orange Subscription",
                        "displayName": "Subscription",
                        "formattedValue": "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf"
                      },
                      "Workspace": {
                        "type": 5,
                        "value": "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T1NetRg01/providers/Microsoft.OperationalInsights/workspaces/Op4T1NetLa01",
                        "isPending": false,
                        "isWaiting": false,
                        "isFailed": false,
                        "isGlobal": false,
                        "labelValue": "Any one",
                        "displayName": "Workspace",
                        "specialValue": "value::1",
                        "formattedValue": "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourceGroups/Op4T1NetRg01/providers/Microsoft.OperationalInsights/workspaces/Op4T1NetLa01"
                      },
                      "TimeRange": {
                        "type": 4,
                        "value": {
                          "durationMs": 259200000
                        },
                        "isPending": false,
                        "isWaiting": false,
                        "isFailed": false,
                        "isGlobal": false,
                        "labelValue": "Last 3 days",
                        "displayName": "TimeRange",
                        "formattedValue": "Last 3 days"
                      },
                      "UnhealthyCriteria": {
                        "type": 2,
                        "value": "30m",
                        "isPending": false,
                        "isWaiting": false,
                        "isFailed": false,
                        "isGlobal": false,
                        "labelValue": "30 minutes without heartbeat",
                        "displayName": "Unhealthy Criteria",
                        "formattedValue": "30m"
                      },
                      "HasHeartbeat": {
                        "type": 2,
                        "isPending": false,
                        "isWaiting": true,
                        "isFailed": false,
                        "isGlobal": false,
                        "labelValue": "<query pending>",
                        "displayName": "HasHeartbeat",
                        "formattedValue": null
                      },
                      "selectedTab": {
                        "type": 1,
                        "value": "Overview",
                        "formattedValue": "Overview"
                      }
                    },
                    "isOptional": true
                  },
                  {
                    "name": "Location",
                    "isOptional": true
                  }
                ],
                "type": "Extension/AppInsightsExtension/PartType/PinnedNotebookQueryPart",
                "partHeader": {
                  "title": "OP4 - Server Health Status",
                  "subtitle": "Shows the Health Status of Servers in OP4"
                }
              }
            },
            "4": {
              "position": {
                "x": 0,
                "y": 2,
                "colSpan": 4,
                "rowSpan": 2
              },
              "metadata": {
                "inputs": [
                  {
                    "name": "userObjectId",
                    "isOptional": true
                  },
                  {
                    "name": "startDate",
                    "isOptional": true
                  },
                  {
                    "name": "endDate",
                    "isOptional": true
                  },
                  {
                    "name": "fromAppsTile",
                    "isOptional": true
                  }
                ],
                "type": "Extension/Microsoft_AAD_IAM/PartType/UsersActivitySummaryReportPart",
                "partHeader": {
                  "title": "User Sign-Ins",
                  "subtitle": ""
                }
              }
            },
            "5": {
              "position": {
                "x": 4,
                "y": 2,
                "colSpan": 2,
                "rowSpan": 2
              },
              "metadata": {
                "inputs": [],
                "type": "Extension/Microsoft_AAD_IAM/PartType/UserManagementSummaryPart",
                "partHeader": {
                  "title": "AAD Users and Groups"
                }
              }
            },
            "6": {
              "position": {
                "x": 0,
                "y": 4,
                "colSpan": 6,
                "rowSpan": 4
              },
              "metadata": {
                "inputs": [
                  {
                    "name": "resourceTypeMode",
                    "isOptional": true
                  },
                  {
                    "name": "ComponentId",
                    "isOptional": true
                  },
                  {
                    "name": "Scope",
                    "value": {
                      "resourceIds": [
                        "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourcegroups/op4t1netrg01/providers/microsoft.operationalinsights/workspaces/op4t1netla01"
                      ]
                    },
                    "isOptional": true
                  },
                  {
                    "name": "PartId",
                    "value": "120b422d-0945-4efb-8451-31d1c9157d9b",
                    "isOptional": true
                  },
                  {
                    "name": "Version",
                    "value": "2.0",
                    "isOptional": true
                  },
                  {
                    "name": "TimeRange",
                    "isOptional": true
                  },
                  {
                    "name": "DashboardId",
                    "isOptional": true
                  },
                  {
                    "name": "DraftRequestParameters",
                    "isOptional": true
                  },
                  {
                    "name": "Query",
                    "value": "// Bottom 10 Free disk space % \n// Bottom 10 Free disk space % by computer. \nInsightsMetrics\n| where TimeGenerated > ago(24h)\n| where Origin == \"vm.azm.ms\"\n| where Namespace == \"LogicalDisk\" and Name == \"FreeSpacePercentage\"\n| summarize DiskSpace = percentile(Val, 90) by Computer\n| top 10 by DiskSpace asc\n",
                    "isOptional": true
                  },
                  {
                    "name": "ControlType",
                    "value": "AnalyticsGrid",
                    "isOptional": true
                  },
                  {
                    "name": "SpecificChart",
                    "isOptional": true
                  },
                  {
                    "name": "PartTitle",
                    "value": "Analytics",
                    "isOptional": true
                  },
                  {
                    "name": "PartSubTitle",
                    "value": "op4t1netla01",
                    "isOptional": true
                  },
                  {
                    "name": "Dimensions",
                    "isOptional": true
                  },
                  {
                    "name": "LegendOptions",
                    "isOptional": true
                  },
                  {
                    "name": "IsQueryContainTimeRange",
                    "value": true,
                    "isOptional": true
                  }
                ],
                "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart",
                "settings": {
                  "content": {
                    "Query": "// Bottom 10 Free disk space % \n// Bottom 10 Free disk space % by computer. \nInsightsMetrics\n| where TimeGenerated > ago(24h)\n| where Origin == \"vm.azm.ms\"\n| where Namespace == \"LogicalDisk\" and Name == \"FreeSpacePercentage\"\n| summarize DiskSpace = percentile(Val, 90) by Computer\n| top 10 by DiskSpace asc\n\n",
                    "ControlType": "FrameControlChart",
                    "SpecificChart": "StackedBar",
                    "Dimensions": {
                      "xAxis": {
                        "name": "Computer",
                        "type": "string"
                      },
                      "yAxis": [
                        {
                          "name": "DiskSpace",
                          "type": "real"
                        }
                      ],
                      "splitBy": [],
                      "aggregation": "Sum"
                    },
                    "LegendOptions": {
                      "isEnabled": true,
                      "position": "Bottom"
                    }
                  }
                }
              }
            },
            "7": {
              "position": {
                "x": 6,
                "y": 7,
                "colSpan": 2,
                "rowSpan": 3
              },
              "metadata": {
                "inputs": [],
                "type": "Extension/Microsoft_Azure_Security/PartType/SecurityMetricGalleryTileViewModel"
              }
            },
            "8": {
              "position": {
                "x": 8,
                "y": 7,
                "colSpan": 7,
                "rowSpan": 4
              },
              "metadata": {
                "inputs": [
                  {
                    "name": "resourceTypeMode",
                    "isOptional": true
                  },
                  {
                    "name": "ComponentId",
                    "isOptional": true
                  },
                  {
                    "name": "Scope",
                    "value": {
                      "resourceIds": [
                        "/subscriptions/fb148d01-d7e6-42f4-9b05-9d28bd1122cf/resourcegroups/op4t1netrg01/providers/microsoft.operationalinsights/workspaces/op4t1netla01"
                      ]
                    },
                    "isOptional": true
                  },
                  {
                    "name": "PartId",
                    "value": "0ca16774-3749-4204-8115-f4bbaa65b83f",
                    "isOptional": true
                  },
                  {
                    "name": "Version",
                    "value": "2.0",
                    "isOptional": true
                  },
                  {
                    "name": "TimeRange",
                    "value": "2021-12-01T01:11:47.000Z/2022-03-11T01:11:47.209Z",
                    "isOptional": true
                  },
                  {
                    "name": "DashboardId",
                    "isOptional": true
                  },
                  {
                    "name": "DraftRequestParameters",
                    "isOptional": true
                  },
                  {
                    "name": "Query",
                    "value": "// Missing security or critical updates \n// Count how many security or other critical updates are missing. \n// To create an alert for this query, click '+ New alert rule'\nUpdate\n| where Classification in (\"Security Updates\", \"Critical Updates\")\n| where UpdateState == 'Needed' and Optional == false and Approved == true\n| summarize count() by Classification, Computer, _ResourceId\n// This query requires the Security or Update solutions\n",
                    "isOptional": true
                  },
                  {
                    "name": "ControlType",
                    "value": "AnalyticsGrid",
                    "isOptional": true
                  },
                  {
                    "name": "SpecificChart",
                    "isOptional": true
                  },
                  {
                    "name": "PartTitle",
                    "value": "Analytics",
                    "isOptional": true
                  },
                  {
                    "name": "PartSubTitle",
                    "value": "op4t1netla01",
                    "isOptional": true
                  },
                  {
                    "name": "Dimensions",
                    "isOptional": true
                  },
                  {
                    "name": "LegendOptions",
                    "isOptional": true
                  },
                  {
                    "name": "IsQueryContainTimeRange",
                    "value": false,
                    "isOptional": true
                  }
                ],
                "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart",
                "settings": {
                  "content": {
                    "Query": "// Missing security or critical updates \n// Count how many security or other critical updates are missing. \n// To create an alert for this query, click '+ New alert rule'\nUpdate\n| where Classification in (\"Security Updates\", \"Critical Updates\")\n| where UpdateState == 'Needed' and Optional == false and Approved == true\n| summarize count() by Classification, Computer\n// This query requires the Security or Update solutions\n\n"
                  }
                },
                "partHeader": {
                  "title": "OP4 Servers Missing Updates",
                  "subtitle": "Displays Servers with Missing Updates"
                }
              }
            },
            "9": {
              "position": {
                "x": 15,
                "y": 7,
                "colSpan": 6,
                "rowSpan": 4
              },
              "metadata": {
                "inputs": [
                  {
                    "name": "partTitle",
                    "value": "Query 1",
                    "isOptional": true
                  },
                  {
                    "name": "query",
                    "value": "// Count virtual machines by OS type\r\n// Returns all virtual machines ordered by name in descending order.\r\n// \r\n// The '=~' in the 'type' match tells Resource Graph to be case insensitive\r\n// Use summarize and count() to define how to group and aggregate the values by property, which in this example is properties.storageProfile.osDisk.osType. You can change it to count by other properties.\r\n// \r\n// Click the \"Run query\" command above to execute the query and see results.\r\nResources\r\n| where type =~ 'Microsoft.Compute/virtualMachines'\r\n| summarize count() by tostring(properties.storageProfile.osDisk.osType)",
                    "isOptional": true
                  },
                  {
                    "name": "chartType",
                    "value": 2,
                    "isOptional": true
                  },
                  {
                    "name": "isShared",
                    "isOptional": true
                  },
                  {
                    "name": "queryId",
                    "value": "",
                    "isOptional": true
                  },
                  {
                    "name": "formatResults",
                    "isOptional": true
                  }
                ],
                "type": "Extension/HubsExtension/PartType/ArgQueryChartTile",
                "settings": {},
                "partHeader": {
                  "title": "OA4 Servers",
                  "subtitle": "Displays Servers in OA4 by OS Type"
                }
              }
            }
          }
        }
      },
      "metadata": {
        "model": {
          "timeRange": {
            "value": {
              "relative": {
                "duration": 24,
                "timeUnit": 1
              }
            },
            "type": "MsPortalFx.Composition.Configuration.ValueTypes.TimeRange"
          },
          "filterLocale": {
            "value": "en-us"
          },
          "filters": {
            "value": {
              "MsPortalFx_TimeRange": {
                "model": {
                  "format": "local",
                  "granularity": "auto",
                  "relative": "24h"
                },
                "displayCache": {
                  "name": "Local Time",
                  "value": "Past 24 hours"
                },
                "filteredPartIds": [
                  "StartboardPart-PinnedNotebookMetricsPart-f0f2a76f-4e01-46ac-a4b8-1bcd35e423af",
                  "StartboardPart-LogsDashboardPart-41d7346b-1bc5-4b09-89ec-1850d9edc1c8",
                  "StartboardPart-LogsDashboardPart-41d7346b-1bc5-4b09-89ec-1850d9edc471",
                  "StartboardPart-PinnedNotebookQueryPart-41d7346b-1bc5-4b09-89ec-1850d9edc786"
                ]
              }
            }
          }
        }
      }
    },
    "name": "OP4 - Monitoring",
    "type": "Microsoft.Portal/dashboards",
    "location": "INSERT LOCATION",
    "tags": {
      "hidden-title": "OP4 - Monitoring"
    },
    "apiVersion": "2015-08-01-preview"
  }